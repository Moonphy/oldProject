/*!17-03-2017 15:05 formapi-js */
"use strict";!function(){var t,e,n=!0,a=!!navigator.userAgent.match(/AppleWebKit.*Mobile.*/),r="jsonp",i=!0,o=a?"gf-dialog":"gf-dialog gf-pc-min",s=function(t,e){var n=document.createElement("script");n.setAttribute("src",t),n.type="text/javascript",n.readyState?n.onreadystatechange=function(){("loaded"==n.readyState||"complete"==n.readyState)&&(n.onreadystatechange=null,e&&e())}:n.onload=function(){e&&e()},document.body.appendChild(n)},u=function(t,e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=t.substr(1).match(n);return null!=a?unescape(a[2]):null},l=function(t){return"true"===t||"1"===t||t===!0||null===t||1===t},c=function(){try{var t=$('script[src*="gf-form-api"]')[0].src,e=t.split("?");e.length>1&&(e="?"+e[1],n=l(u(e,"auto")),i=l(u(e,"gf")),r=l(u(e,"jsonp"))===!0?"jsonp":"post"),n?g():window.GF_FORM_INIT=g}catch(a){}},f={id:"gf_form",submitId:"gf_form_sub"},d=function(e,n){"jsonp"===r?t.ajax({url:e,dataType:"jsonp",jsonp:"callback",data:n,success:p}):t.post(e,n,p)},p=function(e){"string"===t.type(e)&&(e=JSON.parse(e)),"0"==e.errno?"undefined"!=typeof GFDialog?new GFDialog({title:"提示",outClass:o,autoShow:!0,content:"提交成功",isHideToDestroy:!0}):alert("提交成功"):new GFDialog({title:"提示",outClass:o,autoShow:!0,content:"请求出错！请再次尝试",isHideToDestroy:!0}),t("#"+f.id).find("#"+f.submitId).data("lock",!1)},g=function(n){f=t.extend(f,n),e=t("#"+f.id),0!==e.length&&e.find("#"+f.submitId).on("click",function(t){t.preventDefault();var e=$(this),n=e.data("lock");if(!n){var a=h();"array"===$.type(a)?new GFDialog({title:"验证提示",outClass:o,autoShow:!0,content:a[1],isHideToDestroy:!0,save:function(){this.show(0),a[0].focus()}}):i?d(a.postUrl,{id:a.id,fields:a},e):d(a.postUrl,a,e)}})},h=function(){for(var t={},n=e.find("input,textarea,checkbox,radio"),a=0;a<n.length;a++){var r=n.eq(a);if("submit"!==r.attr("type")){var i=m(r);if(i&&i.length>1&&i[0]===!1)return[r,r.attr("name")+i[1]];t[r.attr("name")]=i[0]}}return t},m=function(t){var e=t.attr("vrel"),n=t.val().trim();if(!e)return[n];for(var a=e.split("|"),r=0;r<a.length;r++){var i=a[r].split(":"),o="";if(i.length>1){var s=i[1],u=s.split(",");o=[];for(var l=0;l<u.length;l++){var c=u[l].split("=");o.push({name:c[0],value:c[1]})}}var f=v(n,i[0],o);if(f)return[!1,f]}return[n]},v=function(t,e,n){var a="";switch(e){case"ne":if(""===t)return"不能为空";if(n)for(var r=Math.ceil(y(t)/2),i=0;i<n.length;i++){var o=Number(n[i].value);switch(n[i].name){case"min":o>r&&(a="最少输入"+o+"个字");break;case"max":r>o&&(a="只能输入"+o+"个字")}}break;case"phone":/^1[3|4|5|6|7|8|9][0-9]\d{8}$/.test(t)||(a="请输入手机号");break;case"email":/.+@.+\.[a-zA-Z]{2,4}$/.test(t)||(a="请输入正确的邮箱");break;case"number":/^[0-9]*$/im.test(t)||(a="只能输入数字")}return a},y=function(t){var e=t.length,n=t.match(/[^\x00-\xff]/g);return n&&(e+=n.length),e};document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof window.jQuery?(t=window.jQuery,c()):s("http://file.gaofen.com/html/v5/js/jquery.js",function(){t=window.jQuery,c()}),s("http://file.gaofen.com/html/v5/js/gaofen-plugin/gfdialog.js")})}();
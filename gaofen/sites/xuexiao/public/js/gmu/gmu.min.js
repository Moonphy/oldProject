/* Gmu v2.1.0 */
var gmu=gmu||{version:"@version",$:window.Zepto,staticCall:function(a){var b=a.fn,c=[].slice,d=a();return d.length=1,function(a,e){return d[0]=a,b[e].apply(d,c.call(arguments,2))}}(Zepto)};!function(a,b){function c(a,b,c){(a||"").split(i).forEach(function(a){c(a,b)})}function d(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function e(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function f(a,b,c,f){var g,h;return h=e(b),h.ns&&(g=d(h.ns)),a.filter(function(a){return!(!a||h.e&&a.e!==h.e||h.ns&&!g.test(a.ns)||c&&a.cb!==c&&a.cb._cb!==c||f&&a.ctx!==f)})}function g(a,c){return this instanceof g?(c&&b.extend(this,c),this.type=a,this):new g(a,c)}var h=[].slice,i=/\s+/,j=function(){return!1},k=function(){return!0};g.prototype={isDefaultPrevented:j,isPropagationStopped:j,preventDefault:function(){this.isDefaultPrevented=k},stopPropagation:function(){this.isPropagationStopped=k}},a.event={on:function(a,b,d){var f,g=this;return b?(f=this._events||(this._events=[]),c(a,b,function(a,b){var c=e(a);c.cb=b,c.ctx=d,c.ctx2=d||g,c.id=f.length,f.push(c)}),this):this},one:function(a,b,d){var e=this;return b?(c(a,b,function(a,b){var c=function(){return e.off(a,c),b.apply(d||e,arguments)};c._cb=b,e.on(a,c,d)}),this):this},off:function(a,b,d){var e=this._events;return e?a||b||d?(c(a,b,function(a,b){f(e,a,b,d).forEach(function(a){delete e[a.id]})}),this):(this._events=[],this):this},trigger:function(a){var b,c,d,e,i,j=-1;if(!this._events||!a)return this;if("string"==typeof a&&(a=new g(a)),b=h.call(arguments,1),a.args=b,b.unshift(a),c=f(this._events,a.type))for(e=c.length;++j<e;)if((d=a.isPropagationStopped())||!1===(i=c[j]).cb.apply(i.ctx2,b)){d||(a.stopPropagation(),a.preventDefault());break}return this}},a.Event=g}(gmu,gmu.$),function(a){a.parseTpl=function(a,b){var c="var __p=[];with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(a,b){return"',"+b.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(a,b){return"');"+b.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',d=new Function("obj",c);return b?d(b):d}}(Zepto),function(a,b,c){function d(a){return"[object Object]"===o.call(a)}function e(a,b){a&&Object.keys(a).forEach(function(c){b(c,a[c])})}function f(a){try{a="true"===a?!0:"false"===a?!1:"null"===a?null:+a+""===a?+a:/(?:\{[\s\S]*\}|\[[\s\S]*\])$/.test(a)?JSON.parse(a):a}catch(b){a=c}return a}function g(a){for(var b,d,e={},g=a&&a.attributes,h=g&&g.length;h--;)d=g[h],b=d.name,"data-"===b.substring(0,5)&&(b=b.substring(5),d=f(d.value),d===c||(e[b]=d));return e}function h(e){var f=e.substring(0,1).toLowerCase()+e.substring(1),g=b.fn[f];b.fn[f]=function(f){var g,h,i=n.call(arguments,1),j="string"==typeof f&&f;return b.each(this,function(k,l){if(h=r(l,e)||new a[e](l,d(f)?f:c),"this"===j)return g=h,!1;if(j){if(!b.isFunction(h[j]))throw new Error("组件没有此方法："+j);if(g=h[j].apply(h,i),g!==c&&g!==h)return!1;g=c}}),g!==c?g:this},b.fn[f].noConflict=function(){return b.fn[f]=g,this}}function i(a,c){var d=this;a.superClass&&i.call(d,a.superClass,c),e(r(a,"options"),function(a,e){e.forEach(function(e){var f=e[0],g=e[1];("*"===f||b.isFunction(f)&&f.call(d,c[a])||f===c[a])&&g.call(d)})})}function j(a,d){var f=this;a.superClass&&j.call(f,a.superClass,d),e(r(a,"plugins"),function(a,g){d[a]!==!1&&(e(g,function(a,d){var e;f[a]=b.isFunction(d)&&(e=f[a])?function(){var a,b=f.origin;return f.origin=e,a=d.apply(f,arguments),b===c?delete f.origin:f.origin=b,a}:d}),g._init.call(f))})}function k(){for(var a,c=n.call(arguments),e=c.length;e--;)a=a||c[e],d(c[e])||c.splice(e,1);return c.length?b.extend.apply(null,[!0,{}].concat(c)):a}function l(a,e,f,h,l){var m,n=this;return d(h)&&(l=h,h=c),l&&l.el&&(h=b(l.el)),h&&(n.$el=b(h),h=n.$el[0]),m=n._options=k(e.options,g(h),l),n.template=k(e.template,m.template),n.tpl2html=k(e.tpl2html,m.tpl2html),n.widgetName=a.toLowerCase(),n.eventNs="."+n.widgetName+f,n._init(m),n._options.setup=n.$el&&n.$el.parent()[0]?!0:!1,i.call(n,e,m),j.call(n,e,m),n._create(),n.trigger("ready"),h&&r(h,a,n)&&n.on("destroy",function(){r(h,a,null)}),n}function m(d,f,g){function h(a,b){if("Base"===d)throw new Error("Base类不能直接实例化");return this instanceof h?l.call(this,d,h,i++,a,b):new h(a,b)}"function"!=typeof g&&(g=a.Base);var i=1,j=1;return b.extend(h,{register:function(a,b){var c=r(h,"plugins")||r(h,"plugins",{});return b._init=b._init||p,c[a]=b,h},option:function(a,b,c){var d=r(h,"options")||r(h,"options",{});return d[a]||(d[a]=[]),d[a].push([b,c]),h},inherits:function(a){return m(d+"Sub"+j++,a,h)},extend:function(a){var b=h.prototype,d=g.prototype;q.forEach(function(b){a[b]=k(g[b],a[b]),a[b]&&(h[b]=a[b]),delete a[b]}),e(a,function(a,e){b[a]="function"==typeof e&&d[a]?function(){var b,f=this.$super;return this.$super=function(){var b=n.call(arguments,1);return d[a].apply(this,b)},b=e.apply(this,arguments),f===c?delete this.$super:this.$super=f,b}:e})}}),h.superClass=g,h.prototype=Object.create(g.prototype),h.extend(f),h}var n=[].slice,o=Object.prototype.toString,p=function(){},q=["options","template","tpl2html"],r=function(){var a={},b=0,d="_gid";return function(e,f,g){var h=e[d]||(e[d]=++b),i=a[h]||(a[h]={});return g!==c&&(i[f]=g),null===g&&delete i[f],i[f]}}(),s=a.event;a.define=function(b,c,d){a[b]=m(b,c,d),h(b)},a.isWidget=function(b,c){return c="string"==typeof c?a[c]||p:c,c=c||a.Base,b instanceof c},a.Base=m("Base",{_init:p,_create:p,getEl:function(){return this.$el},on:s.on,one:s.one,off:s.off,trigger:function(c){var d="string"==typeof c?new a.Event(c):c,e=[d].concat(n.call(arguments,1)),f=this._options[d.type],g=this.getEl();return f&&b.isFunction(f)&&!1===f.apply(this,e)&&(d.stopPropagation(),d.preventDefault()),s.trigger.apply(this,e),g&&g.triggerHandler(d,(e.shift(),e)),this},tpl2html:function(a,c){var d=this.template;return d="string"==typeof a?d[a]:(c=a,d),c||~d.indexOf("<%")?b.parseTpl(d,c):d},destroy:function(){this.$el&&this.$el.off(this.eventNs),this.trigger("destroy"),this.off(),this.destroyed=!0}},Object),b.ui=a}(gmu,gmu.$),function(a,b,c){a.define("Refresh",{options:{load:null,statechange:null},_init:function(){var a=this,c=a._options;a.on("ready",function(){b.each(["up","down"],function(b,d){var e=c["$"+d+"Elem"],f=e.get(0);e.length&&(a._status(d,!0),(!f.childNodes.length||e.find(".ui-refresh-icon").length&&e.find(".ui-refresh-label").length)&&(!f.childNodes.length&&a._createBtn(d),c.refreshInfo||(c.refreshInfo={}),c.refreshInfo[d]={$icon:e.find(".ui-refresh-icon"),$label:e.find(".ui-refresh-label"),text:e.find(".ui-refresh-label").html()}),e.on("click",function(){a._status(d)&&!c._actDir&&(a._setStyle(d,"loading"),a._loadingAction(d,"click"))}))})}),a.on("destroy",function(){a.$el.remove()})},_create:function(){var a=this,b=a._options,c=a.$el;a._options.setup&&(b.$upElem=c.find(".ui-refresh-up"),b.$downElem=c.find(".ui-refresh-down"),c.addClass("ui-refresh"))},_createBtn:function(a){return this._options["$"+a+"Elem"].html('<span class="ui-refresh-icon"></span><span class="ui-refresh-label">加载更多</span>'),this},_setStyle:function(a,c){var d=this,e=b.Event("statechange");return d.trigger(e,d._options["$"+a+"Elem"],c,a),e.defaultPrevented?d:d._changeStyle(a,c)},_changeStyle:function(a,b){var c=this._options,d=c.refreshInfo[a];switch(b){case"loaded":d.$label.html(d.text),d.$icon.removeClass(),c._actDir="";break;case"loading":d.$label.html("加载中..."),d.$icon.addClass("ui-loading"),c._actDir=a;break;case"disable":d.$label.html("没有更多内容了")}return this},_loadingAction:function(a,c){var d=this,e=d._options,f=e.load;return b.isFunction(f)&&f.call(d,a,c),d._status(a,!1),d},afterDataLoading:function(a){var b=this,a=a||b._options._actDir;return b._setStyle(a,"loaded"),b._status(a,!0),b},_status:function(a,b){var d=this._options;return b===c?d["_"+a+"Open"]:d["_"+a+"Open"]=!!b},_setable:function(a,c,d){var e=this,f=e._options,g=c?[c]:["up","down"];return b.each(g,function(b,c){var g=f["$"+c+"Elem"];g.length&&(a?g.show():d?g.hide():e._setStyle(c,"disable"),e._status(c,a))}),e},disable:function(a,b){return this._setable(!1,a,b)},enable:function(a){return this._setable(!0,a)}})}(gmu,gmu.$),function(a){a.extend(a,{throttle:function(b,c,d){function e(){function a(){g=Date.now(),c.apply(h,j)}function e(){f=void 0}var h=this,i=Date.now()-g,j=arguments;d&&!f&&a(),f&&clearTimeout(f),void 0===d&&i>b?a():f=setTimeout(d?e:a,void 0===d?b-i:b)}var f,g=0;return"function"!=typeof c&&(d=c,c=b,b=250),e._zid=c._zid=c._zid||a.proxy(c)._zid,e},debounce:function(b,c,d){return void 0===c?a.throttle(250,b,!1):a.throttle(b,c,void 0===d?!1:d!==!1)}})}(Zepto),function(a,b){a.Refresh.register("iOS5",{_init:function(){var a=this,c=a._options,d=a.$el;d.css({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),c.topOffset=c.$upElem?c.$upElem.height():0,c.iScroll=a._getiScroll(),d.get(0).scrollTop=c.topOffset,d.on("touchstart touchmove touchend",b.proxy(a._eventHandler,a))},_changeStyle:function(a,b){var c=this,d=c._options,e=d.refreshInfo[a];switch(c.origin(a,b),b){case"loaded":e.$icon.addClass("ui-refresh-icon"),d._actDir="";break;case"beforeload":e.$label.html("松开立即加载"),e.$icon.addClass("ui-refresh-flip");break;case"loading":e.$icon.removeClass().addClass("ui-loading")}return c},_scrollStart:function(a){var b=this,c=b._options,d=c.topOffset,e=c.$upElem,f=b.$el.get(0),g=function(){clearTimeout(c.topOffsetTimer),e&&e.length&&f.scrollTop<=d&&!c._upRefreshed&&(f.scrollTop=d)};return b.trigger("scrollstart",a),b._enableScroll()._bindScrollStop(f,g),c.maxScrollY=f.offsetHeight-f.scrollHeight,c._scrollFn=g,b},_scrollMove:function(){var a=this,b=a._options,c=b.$upElem&&b.$upElem.length,d=b.$downElem&&b.$downElem.length,e=a.$el.get(0),f=b.threshold||5;a._scrollMove=function(g){var h=b.maxScrollY,i=e.scrollTop,j=b.lastMoveY||i,k=b._upRefreshed,l=b._downRefreshed,m=a._status("up"),n=a._status("down");if(!(c&&!m||d&&!n))return b.iScroll.deltaY=i-j,n&&d&&!l&&h-f>-i?a._setMoveState("down","beforeload","pull"):n&&d&&l&&-i>h-f&&-i!==h?a._setMoveState("down","loaded","restore"):m&&c&&!k&&-i>f?a._setMoveState("up","beforeload","pull"):m&&c&&k&&f>-i&&i&&a._setMoveState("up","loaded","restore"),b.lastMoveY=i,b._moved=!0,a.trigger("scrollmove",g,i,i-j)},a._scrollMove.apply(a,arguments)},_scrollEnd:function(a){var c=this,d=c._options,e=c.$el.get(0),f=d.topOffset,g=d._actDir,h=d._restoreDir;return("up"==h||e.scrollTop<=f)&&!g&&d._moved&&(c._options.topOffsetTimer=setTimeout(function(){b(e).off("scroll",d._scrollFn),e.scrollTop=f},800)),g&&c._status(g)&&(c._setStyle(g,"loading"),c._loadingAction(g,"pull")),d._moved=!1,c.trigger("scrollend",a)},_enableScroll:function(){var a=this,b=a.$el.get(0),c=b.scrollTop;return 0>=c&&(b.scrollTop=1),c+b.offsetHeight>=b.scrollHeight&&(b.scrollTop=b.scrollHeight-b.offsetHeight-1),a},_bindScrollStop:function(a,c){var d=this,e=b(a);return e.off("scroll",d._options._scrollFn).on("scroll",b.debounce(100,function(){e.off("scroll",arguments.callee).one("scroll",c)},!1)),d},_getiScroll:function(){var a=this,b=a.$el,c=b[0];return{el:c,deltaY:0,scrollTo:function(a,d,e){e&&(a=c.scrollTop+a),b.css({"-webkit-transition-property":"scrollTop","-webkit-transition-duration":a+"ms"}),c.scrollTop=a},disable:function(c){c&&a.destroy(),b.css("overflow","hidden")},enable:function(){b.css("overflow","scroll")}}},_setMoveState:function(a,b,c){var d=this,e=d._options;return d._setStyle(a,b),e["_"+a+"Refreshed"]="pull"==c,e._actDir="pull"==c?a:"",e._restoreDir="up"==a&&"restore"==c?a:"",d},_eventHandler:function(a){var b=this;switch(a.type){case"touchstart":b._scrollStart(a);break;case"touchmove":b._scrollMove(a);break;case"touchend":b._scrollEnd(a)}},afterDataLoading:function(a){var b=this,c=b._options,a=a||c._actDir;return c["_"+a+"Refreshed"]=!1,"up"==a&&(b.$el.get(0).scrollTop=c.topOffset),b.origin(a)}})}(gmu,gmu.$);
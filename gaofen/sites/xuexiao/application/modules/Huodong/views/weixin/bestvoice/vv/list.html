<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>列表</title>
    <!--coolie-->
    <!--/coolie-->
    <link rel="stylesheet" type="text/css" href="http://cdn.staticfile.org/twitter-bootstrap/3.2.0/css/bootstrap.min.css">
    <style>
        audio{
            display: block;
            height: 30px;
            width: 150px;
        }
    </style>
</head>
<body>
<div class="container">
    <table class="table table-bordered">
        <thead>
            <tr>
                <td width="10%">昵称</td>
                <td width="13%">时间</td>
                <td width="17%">播放</td>
                <td width="60%">地址</td>
            </tr>
        </thead>
        <tbody>
            <?php foreach($list['list'] as $row): ?>
            <tr>
                <td><?php F::O($row->user->nickname); ?></td>
                <td><?php F::O($row->created_at); ?></td>
                <td><audio src="<?php echo $row->present()->getVoiceLink(); ?>" controls></audio>[<a href="<?php echo F::URL('/Huodong/weixin_bestvoice_vv/fix', ['mid'=>$row->id]); ?>" target="_blank">修复</a>]</td>
                <td><?php echo $row->present()->getVoiceLink(); ?><button class="mycopy" rel="<?php echo $row->present()->getVoiceLink(); ?>">[复制]</button></td>
            </tr>
            <?php endforeach; ?>
        </tbody>
    </table>
</div>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/zeroclipboard/2.1.6/ZeroClipboard.min.js"></script>
<script type="text/javascript">
    var cls = document.getElementsByClassName('mycopy');
    var clip = new ZeroClipboard(cls);
    clip.on("copy", function(e){
        // console.log(e.target.getAttribute('rel'));
        e.clipboardData.setData("text/plain", e.target.getAttribute('rel'))
    });
    // Gaofen.PD.set({'uri':<?php echo $ajaxUri; ?>, 'router':'index'});
</script>
</body>
</html>
- var suffix = environment == "production" ? ".min" : "";

//- 导入元件
//------------------------------
//- 全站公用元件
include partials/_components

//- 导入侧栏挂件
//------------------------------
include partials/_widgets

//- 导入导航栏
//------------------------------
include partials/_navbar

//- 导入浮层
//------------------------------
include partials/_modals
include partials/_bubbles

doctype html
html
  head
    meta(charset="UTF-8")
    title= site_name + page_title
    meta(name="keyword", content="")
    meta(name="description", content="")
    //- old_layout 定义在_data.json，若分站的页头与页脚统一了样式，可以移除该变量，且调用该变量的地方移除相应判断代码
    if old_layout
      link(rel="stylesheet",  href="#{current.base}css/default/base#{suffix}.css")
    else
      link(rel="stylesheet",  href="#{current.base}css/shared/base#{suffix}.css")
    if stylesheets
      each stylesheet in stylesheets
        link(rel="stylesheet", href="#{current.base}css/#{category}/#{stylesheet}#{suffix}.css")
  body(class=body_class ? body_class : false, id=body_id ? body_id : false)
    #wrap
      // Start: 页头
      if old_layout
        include partials/_old-header
      else
        include partials/_header
      // End: 页头

      block content

      // Start: 页脚
      if old_layout
        include partials/_old-footer
      else
        include partials/_footer
      // End: 页脚

    // Start: 返回顶部
    include partials/_gotop
    // End: 返回顶部

    block qrcode

    if ad_footer0
      // Start: 底部悬浮广告条
      include partials/_ad-footer
      // End: 底部悬浮广告条

    //- 浮层
    if environment != "production" || outputModal == true
      +modal({modals:modals})

      if bubbles
        +bubble({bubbles:bubbles})

    if fixed_preview_toolbar
      // Strat: 预览工具条
      include default/data/partials/_preview-toolbar
      include default/data/partials/_html-previewer
      +preview-toolbar({fixed:true})
      #readercontainerfull.full-wrap
        +html-previewer({scale:1.3075, margin_bottom:338})
      // End: 预览工具条

    //- 图片预览
    if picture_previewer
      include default/data/partials/_picture-previewer
      #readercontainerfull.full-wrap
        +picture-previewer({large_pic: true})

    //- 对联广告
    if current.path == "demos,default,home,index0"
      a.picture-couplet.picture-couplet-left.picture-couplet-fold.hidden(href="#", target="_blank")
      a.picture-couplet.picture-couplet-right.picture-couplet-fold.hidden(href="#", target="_blank")

    if current.path == "demos,default,home,index0"
      .picture-couplet-s2.picture-couplet-left(href="#", target="_blank", style="width:128px; height:464px;")
        a(href="#", target="_blank")
          +dummy(128, 464)
        span.close
      .picture-couplet-s2.picture-couplet-right(href="#", target="_blank", style="width:128px; height:464px;")
        a(href="#", target="_blank")
          +dummy(128, 464)
        span.close

    if category == "sz"
      .ad-bottom
        a(href="#", target="_blank")
        span.close

    //- 脚本
    include partials/_scripts
